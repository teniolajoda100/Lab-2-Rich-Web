<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LRRH</title>
</head>
<body>
    <article>
        <p>Once upon a time there lived a little girl who always wore a red cape with a hood.</p>
        <p>One day she was walking through the woods on the way to her granny's house, taking her time to pick berries and listen to the birdsong.</p>
        <p>The big bad wolf spotted her from a distance and, knowing who she was, hatched a plan, running quickly to the granny's house to put it in motion.</p>
        <p>The frog just sat there, but from the way he looked at her the princess could say that he was thinking.</p>
        <p>When the girl arrived at her granny's house, she thought granny looked strange and enquired 'Granny, why are your ears so big?'</p>
        <p>Granny said 'It is the better to hear you, my child.'</p>
        <p>Granny said 'It is the better to embrace you, my dear.'</p>
        <p>Then the little girl asked 'Granny, and why are your arms so big?'</p>
        <p>The little girl was not reassured and continued quizzing: 'Granny, but why is your mouth so big?'</p>
        <p>Granny then shouted 'It is the better to eat you!' and the wolf jumped out of the bed, granny's clothes tearing off him. Still hungry after eating the frail old woman, he devoured our friend :-(.</p>
        <p>THE END</p>
    </article>

    <script>
        function fixStory() {
            // 1️⃣ Add a title at the top
            const article = document.querySelector('article');
            const title = document.createElement('h1');
            title.textContent = "Little Red Riding Hood";
            article.prepend(title);

            // 2️⃣ Remove the paragraph that doesn't belong (the one about the frog)
            const paragraphs = article.querySelectorAll('p');
            paragraphs.forEach(p => {
                if (p.textContent.includes("frog")) {
                    p.remove();
                }
            });

            // 3️⃣ Swap the two paragraphs that are in the wrong order
            const updatedParas = article.querySelectorAll('p');
            const embracePara = Array.from(updatedParas).find(p => p.textContent.includes("embrace you"));
            const armsPara = Array.from(updatedParas).find(p => p.textContent.includes("arms so big"));
            if (embracePara && armsPara) {
                article.insertBefore(armsPara, embracePara);
            }

            // 4️⃣ Replace the 'THE END' paragraph with a new ending
            const endPara = Array.from(article.querySelectorAll('p')).find(p => p.textContent.includes("THE END"));
            if (endPara) {
                const newEnding = document.createElement('p');
                newEnding.textContent = "However, the good hunter was passing by and heard what was happening. He was able to cut open the wolf and save both girl and granny.";
                endPara.replaceWith(newEnding);
            }

            // Optional: Display confirmation
            const message = document.createElement('p');
            message.style.color = "green";
            message.style.fontWeight = "bold";
            message.textContent = "✅ The story has been fixed!";
            article.appendChild(message);

            // Prevent running multiple times
            document.removeEventListener('keydown', fixStory);
        }

        // 5️⃣ Attach event handler to any keystroke
        document.addEventListener('keydown', fixStory);
    </script>
</body>
</html>
